<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Proxy API Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        pre { background: #1e293b; color: #e2e8f0; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 p-6 max-w-4xl mx-auto">

    <header class="mb-10 text-center">
        <h1 class="text-4xl font-bold text-blue-600 mb-2">AI Proxy API</h1>
        <p class="text-gray-500">Free, serverless AI endpoint proxying DeepInfra with UA rotation.</p>
    </header>

    <section class="mb-12">
        <h2 class="text-2xl font-semibold mb-4 border-b pb-2">üöÄ Usage</h2>
        
        <div class="bg-white p-6 rounded-lg shadow-sm border">
            <h3 class="font-bold mb-2">Endpoint Format</h3>
            <code class="block bg-gray-100 p-3 rounded text-sm mb-4">GET /chat/{model}?prompt={your_text}</code>

            <h3 class="font-bold mb-2">Example URL</h3>
            <a href="/chat/deepseek-v3?prompt=Explain quantum physics in 5 words" target="_blank" class="text-blue-500 hover:underline break-all">
                /chat/deepseek-v3?prompt=Explain quantum physics in 5 words
            </a>
        </div>
    </section>

    <section class="mb-12">
        <h2 class="text-2xl font-semibold mb-4 border-b pb-2">üõ†Ô∏è Live Tester</h2>
        
        <div class="bg-white p-6 rounded-lg shadow-sm border grid gap-4">
            <div>
                <label class="block text-sm font-medium mb-1">Model</label>
                <select id="modelSelect" class="w-full p-2 border rounded">
                    <option value="deepseek-v3">deepseek-v3</option>
                    <option value="deepseek-r1">deepseek-r1</option>
                    <option value="qwen-coder">qwen-coder</option>
                    <option value="meta-llama/Meta-Llama-3.1-70B-Instruct">llama-3.1-70b (Direct ID)</option>
                </select>
            </div>
            
            <div>
                <label class="block text-sm font-medium mb-1">Prompt</label>
                <input type="text" id="promptInput" value="Write a hello world in Python" class="w-full p-2 border rounded">
            </div>

            <button onclick="testApi()" class="bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition">
                Send Request
            </button>

            <div id="responseArea" class="hidden mt-4">
                <h4 class="text-sm font-bold text-gray-500 mb-1">Response:</h4>
                <pre id="jsonOutput" class="text-xs"></pre>
            </div>
        </div>
    </section>

    <section>
        <h2 class="text-2xl font-semibold mb-4 border-b pb-2">üì¶ Supported Models</h2>
        <ul class="list-disc pl-5 space-y-2">
            <li><strong>deepseek-v3</strong> (Map: deepseek-ai/DeepSeek-V3)</li>
            <li><strong>deepseek-r1</strong> (Map: deepseek-ai/DeepSeek-R1)</li>
            <li><strong>qwen-coder</strong> (Map: Qwen/Qwen2.5-Coder-32B-Instruct)</li>
            <li><em>Any raw DeepInfra model ID</em> passed directly in the URL.</li>
        </ul>
    </section>

    <script>
        async function testApi() {
            const model = document.getElementById('modelSelect').value;
            const prompt = document.getElementById('promptInput').value;
            const output = document.getElementById('jsonOutput');
            const area = document.getElementById('responseArea');

            area.classList.remove('hidden');
            output.textContent = "Loading...";

            try {
                // Construct URL
                // We use the rewrite format here
                const url = `/chat/${encodeURIComponent(model)}?prompt=${encodeURIComponent(prompt)}`;
                
                const res = await fetch(url);
                const data = await res.json();
                
                output.textContent = JSON.stringify(data, null, 2);
            } catch (e) {
                output.textContent = "Error: " + e.message;
            }
        }
    </script>

</body>
</html>
